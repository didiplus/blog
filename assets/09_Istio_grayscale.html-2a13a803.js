import{ab as i,G as a,H as n,ad as t}from"./framework-894cff3a.js";const s={},o=t('<h1 id="云原生第9课-istio-灰度发布管理" tabindex="-1"><a class="header-anchor" href="#云原生第9课-istio-灰度发布管理" aria-hidden="true">#</a> 云原生第9课：Istio 灰度发布管理</h1><h2 id="灰度发布概述" tabindex="-1"><a class="header-anchor" href="#灰度发布概述" aria-hidden="true">#</a> 灰度发布概述</h2><p><strong>灰度发布的定义和分类</strong></p><p>灰度发布是迭代的软件产品在生产环境安全上线的一种重要手段。</p><p>应用服务网格基于Istio提供的服务治理能力，对服务提供多版本支持和灵活的流量策略，从而支持多种灰度发布场景。</p><p><strong>金丝雀发布（可理解为灰度发布）</strong></p><p>在生产环境上引一部分实际流量对一个新版本进行测试，测试新版本的性能和表现，在保证系统整体稳定运行的前提下，尽早发现新版本在实际环境上的问题。</p><p>通过在线上运行的服务中，新加入少量的新版本的服务，然后从这少量的新版本中快速获得反馈，根据反馈决定最后的交付形态。</p><h3 id="基于权重的灰度发布" tabindex="-1"><a class="header-anchor" href="#基于权重的灰度发布" aria-hidden="true">#</a> 基于权重的灰度发布</h3><p>可根据需要灵活动态的调整不同服务版本的流量比例</p><figure><img src="https://didiplus.oss-cn-hangzhou.aliyuncs.com/20230228111136.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h3 id="基于内容的灰度发布" tabindex="-1"><a class="header-anchor" href="#基于内容的灰度发布" aria-hidden="true">#</a> 基于内容的灰度发布</h3><p>可根据请求的内容控制其流向的服务版本（Cookie, Header, OS, Browser）</p><figure><img src="https://didiplus.oss-cn-hangzhou.aliyuncs.com/20230228111151.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h3 id="蓝绿发布" tabindex="-1"><a class="header-anchor" href="#蓝绿发布" aria-hidden="true">#</a> 蓝绿发布</h3><p>蓝绿发布提供了一种零宕机的部署方式。不停老版本，部署新版本进行测试，确认OK，将流量切到新版本，然后老版本同时也升级到新版本。始终有两个版本同时在线，有问题可以快速切换。</p><p>在部署应用的过程中，应用始终在线。并且新版本上线过程中，不会修改老版本的任何内容，在部署期间老版本状态不受影响。只要老版本的资源不被删除，可以在任何时间回滚到老版本。</p><p>可根据需要将全量流量在新旧版本间切换：</p><figure><img src="https://didiplus.oss-cn-hangzhou.aliyuncs.com/20230228111201.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h3 id="灰度发布功能-–-基于内容的灰度发布" tabindex="-1"><a class="header-anchor" href="#灰度发布功能-–-基于内容的灰度发布" aria-hidden="true">#</a> 灰度发布功能 – 基于内容的灰度发布</h3><p><strong>Deployment</strong></p><figure><img src="https://didiplus.oss-cn-hangzhou.aliyuncs.com/20230228111450.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p><strong>Destination Rule</strong></p><figure><img src="https://didiplus.oss-cn-hangzhou.aliyuncs.com/20230228111506.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p><strong>Virtual Service</strong></p><figure><img src="https://didiplus.oss-cn-hangzhou.aliyuncs.com/20230228111533.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h3 id="灰度发布功能-–-基于权重的灰度发布" tabindex="-1"><a class="header-anchor" href="#灰度发布功能-–-基于权重的灰度发布" aria-hidden="true">#</a> 灰度发布功能 – 基于权重的灰度发布</h3><p><strong>Deployment</strong><img src="https://didiplus.oss-cn-hangzhou.aliyuncs.com/20230228111636.png" alt="" loading="lazy"></p><p><strong>Destination Rule</strong></p><figure><img src="https://didiplus.oss-cn-hangzhou.aliyuncs.com/20230228111709.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p><strong>Virtual Service</strong></p><figure><img src="https://didiplus.oss-cn-hangzhou.aliyuncs.com/20230228111730.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h3 id="灰度发布功能-–-蓝绿发布" tabindex="-1"><a class="header-anchor" href="#灰度发布功能-–-蓝绿发布" aria-hidden="true">#</a> 灰度发布功能 – 蓝绿发布</h3><p><strong>Deployment</strong></p><figure><img src="https://didiplus.oss-cn-hangzhou.aliyuncs.com/20230228111759.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p><strong>Destination Rule</strong></p><figure><img src="https://didiplus.oss-cn-hangzhou.aliyuncs.com/20230228111820.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p><strong>Virtual Service</strong></p><figure><img src="https://didiplus.oss-cn-hangzhou.aliyuncs.com/20230228111840.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure>',39),e=[o];function r(g,c){return a(),n("div",null,e)}const d=i(s,[["render",r],["__file","09_Istio_grayscale.html.vue"]]);export{d as default};
