import{ab as m,G as b,H as v,E as n,S as s,N as e,ac as a,L as k,ad as o,W as d}from"./framework-b31a425c.js";const h={},g=n("h1",{id:"å®‰è£…kubernetesé«˜å¯ç”¨",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#å®‰è£…kubernetesé«˜å¯ç”¨","aria-hidden":"true"},"#"),s(" å®‰è£…Kubernetesé«˜å¯ç”¨")],-1),f={class:"hint-container tip"},y=n("p",{class:"hint-container-title"},"æç¤º",-1),x=o(`<h2 id="ä»‹ç»" tabindex="-1"><a class="header-anchor" href="#ä»‹ç»" aria-hidden="true">#</a> ä»‹ç»</h2><p>kubernetes å®‰è£…æœ‰å¤šç§é€‰æ‹©ï¼Œæœ¬æ–‡æ¡£æè¿°çš„é›†ç¾¤å®‰è£…å…·å¤‡å¦‚ä¸‹ç‰¹ç‚¹ï¼š</p><ul><li>Kubernetes 1.16.2 <ul><li>calico 3.9</li><li>nginx-ingress 1.5.3</li></ul></li><li>Docker 18.09.7</li><li>ä¸‰ä¸ª master ç»„æˆä¸»èŠ‚ç‚¹é›†ç¾¤ï¼Œé€šè¿‡å†…ç½‘ loader balancer å®ç°è´Ÿè½½å‡è¡¡ï¼›è‡³å°‘éœ€è¦ä¸‰ä¸ª master èŠ‚ç‚¹æ‰å¯ç»„æˆé«˜å¯ç”¨é›†ç¾¤ï¼Œå¦åˆ™ä¼šå‡ºç° <em><strong>è„‘è£‚</strong></em> ç°è±¡</li><li>å¤šä¸ª worker ç»„æˆå·¥ä½œèŠ‚ç‚¹é›†ç¾¤ï¼Œé€šè¿‡å¤–ç½‘ loader balancer å®ç°è´Ÿè½½å‡è¡¡</li></ul><figure><img src="https://didiplus.oss-cn-hangzhou.aliyuncs.com/kubernetes.png" alt="Kuberneteså®‰è£…ï¼šæ‹“æ‰‘ç»“æ„" tabindex="0" loading="lazy"><figcaption>Kuberneteså®‰è£…ï¼šæ‹“æ‰‘ç»“æ„</figcaption></figure><h2 id="æ£€æŸ¥-centos-hostname" tabindex="-1"><a class="header-anchor" href="#æ£€æŸ¥-centos-hostname" aria-hidden="true">#</a> æ£€æŸ¥ centos / hostname</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># åœ¨ master èŠ‚ç‚¹å’Œ worker èŠ‚ç‚¹éƒ½è¦æ‰§è¡Œ</span>
<span class="token function">cat</span> /etc/redhat-release

<span class="token comment"># æ­¤å¤„ hostname çš„è¾“å‡ºå°†ä¼šæ˜¯è¯¥æœºå™¨åœ¨ Kubernetes é›†ç¾¤ä¸­çš„èŠ‚ç‚¹åå­—</span>
<span class="token function">hostname</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æ“ä½œç³»ç»Ÿå…¼å®¹æ€§</strong></p><table><thead><tr><th>CentOS ç‰ˆæœ¬</th><th>æœ¬æ–‡æ¡£æ˜¯å¦å…¼å®¹</th><th>å¤‡æ³¨</th></tr></thead><tbody><tr><td>7.7</td><td><span style="font-size:24px;">ğŸ˜„</span></td><td>å·²éªŒè¯</td></tr><tr><td>7.6</td><td><span style="font-size:24px;">ğŸ˜„</span></td><td>å·²éªŒè¯</td></tr><tr><td>7.5</td><td><span style="font-size:24px;">ğŸ˜</span></td><td>å·²è¯å®ä¼šå‡ºç° kubelet æ— æ³•å¯åŠ¨çš„é—®é¢˜</td></tr><tr><td>7.4</td><td><span style="font-size:24px;">ğŸ˜</span></td><td>åŒä¸Š</td></tr><tr><td>7.3</td><td><span style="font-size:24px;">ğŸ˜</span></td><td>åŒä¸Š</td></tr><tr><td>7.2</td><td><span style="font-size:24px;">ğŸ˜</span></td><td>åŒä¸Š</td></tr></tbody></table><div class="hint-container tip"><p class="hint-container-title">ä¿®æ”¹ hostname</p><p>å¦‚æœæ‚¨éœ€è¦ä¿®æ”¹ hostnameï¼Œå¯æ‰§è¡Œå¦‚ä¸‹æŒ‡ä»¤ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># ä¿®æ”¹ hostname</span>
hostnamectl set-hostname your-new-host-name
<span class="token comment"># æŸ¥çœ‹ä¿®æ”¹ç»“æœ</span>
hostnamectl status
<span class="token comment"># è®¾ç½® hostname è§£æ</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;127.0.0.1   <span class="token variable"><span class="token variable">$(</span><span class="token function">hostname</span><span class="token variable">)</span></span>&quot;</span> <span class="token operator">&gt;&gt;</span> /etc/hosts
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><h2 id="æ£€æŸ¥ç½‘ç»œ" tabindex="-1"><a class="header-anchor" href="#æ£€æŸ¥ç½‘ç»œ" aria-hidden="true">#</a> æ£€æŸ¥ç½‘ç»œ</h2><p>åœ¨æ‰€æœ‰èŠ‚ç‚¹æ‰§è¡Œå‘½ä»¤</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>[root@demo-master-a-1 ~]$ ip route show
default via 172.21.0.1 dev eth0 
169.254.0.0/16 dev eth0 scope link metric 1002 
172.21.0.0/20 dev eth0 proto kernel scope link src 172.21.0.12 

[root@demo-master-a-1 ~]$ ip address
1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
       valid_lft forever preferred_lft forever
2: eth0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP group default qlen 1000
    link/ether 00:16:3e:12:a4:1b brd ff:ff:ff:ff:ff:ff
    inet 172.17.216.80/20 brd 172.17.223.255 scope global dynamic eth0
       valid_lft 305741654sec preferred_lft 305741654sec
</code></pre><div class="highlight-lines"><br><div class="highlight-line">Â </div><br><br><br><br><br><br><br><br><div class="highlight-line">Â </div><br><div class="highlight-line">Â </div><br></div><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,12),R={class:"hint-container tip"},_=n("p",{class:"hint-container-title"},"kubeletä½¿ç”¨çš„IPåœ°å€",-1),U=n("code",null,"ip route show",-1),V=n("code",null,"eth0",-1),N=n("li",null,[n("code",null,"ip address"),s(" å‘½ä»¤ä¸­ï¼Œå¯æ˜¾ç¤ºé»˜è®¤ç½‘å¡çš„ IP åœ°å€ï¼ŒKubernetes å°†ä½¿ç”¨æ­¤ IP åœ°å€ä¸é›†ç¾¤å†…çš„å…¶ä»–èŠ‚ç‚¹é€šä¿¡ï¼Œå¦‚ "),n("code",null,"172.17.216.80")],-1),E=n("li",null,"æ‰€æœ‰èŠ‚ç‚¹ä¸Š Kubernetes æ‰€ä½¿ç”¨çš„ IP åœ°å€å¿…é¡»å¯ä»¥äº’é€šï¼ˆæ— éœ€ NAT æ˜ å°„ã€æ— å®‰å…¨ç»„æˆ–é˜²ç«å¢™éš”ç¦»ï¼‰",-1),T=n("h2",{id:"å®‰è£…-docker-kubelet",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#å®‰è£…-docker-kubelet","aria-hidden":"true"},"#"),s(" å®‰è£… docker / kubelet")],-1),S=o('<h2 id="åˆå§‹åŒ–api-server" tabindex="-1"><a class="header-anchor" href="#åˆå§‹åŒ–api-server" aria-hidden="true">#</a> åˆå§‹åŒ–API Server</h2><h3 id="åˆ›å»º-apiserver-çš„-load-balancer-ç§ç½‘" tabindex="-1"><a class="header-anchor" href="#åˆ›å»º-apiserver-çš„-load-balancer-ç§ç½‘" aria-hidden="true">#</a> åˆ›å»º ApiServer çš„ Load Balancerï¼ˆç§ç½‘ï¼‰</h3><p>ç›‘å¬ç«¯å£ï¼š6443 / TCP</p><p>åç«¯èµ„æºç»„ï¼šåŒ…å« demo-master-a-1, demo-master-a-2, demo-master-a-3</p><p>åç«¯ç«¯å£ï¼š6443</p><p>å¼€å¯ æŒ‰æºåœ°å€ä¿æŒä¼šè¯</p><p>å‡è®¾å®Œæˆåˆ›å»ºä»¥åï¼ŒLoad Balancerçš„ ip åœ°å€ä¸º x.x.x.x</p><blockquote><p>æ ¹æ®æ¯ä¸ªäººå®é™…çš„æƒ…å†µä¸åŒï¼Œå®ç° LoadBalancer çš„æ–¹å¼ä¸ä¸€æ ·ï¼Œæœ¬æ–‡ä¸è¯¦ç»†é˜è¿°å¦‚ä½•æ­å»º LoadBalancerï¼Œè¯·è¯»è€…è‡ªè¡Œè§£å†³ï¼Œå¯ä»¥è€ƒè™‘çš„é€‰æ‹©æœ‰ï¼š</p><ul><li>nginx</li><li>haproxy</li><li>keepalived</li><li>äº‘ä¾›åº”å•†æä¾›çš„è´Ÿè½½å‡è¡¡äº§å“</li></ul></blockquote><h3 id="åˆå§‹åŒ–ç¬¬ä¸€ä¸ªmasterèŠ‚ç‚¹" tabindex="-1"><a class="header-anchor" href="#åˆå§‹åŒ–ç¬¬ä¸€ä¸ªmasterèŠ‚ç‚¹" aria-hidden="true">#</a> åˆå§‹åŒ–ç¬¬ä¸€ä¸ªmasterèŠ‚ç‚¹</h3><div class="hint-container tip"><p class="hint-container-title">æç¤º</p><ul><li>ä»¥ root èº«ä»½åœ¨ demo-master-a-1 æœºå™¨ä¸Šæ‰§è¡Œ</li><li>åˆå§‹åŒ– master èŠ‚ç‚¹æ—¶ï¼Œå¦‚æœå› ä¸ºä¸­é—´æŸäº›æ­¥éª¤çš„é…ç½®å‡ºé”™ï¼Œæƒ³è¦é‡æ–°åˆå§‹åŒ– master èŠ‚ç‚¹ï¼Œè¯·å…ˆæ‰§è¡Œ <code>kubeadm reset</code> æ“ä½œ</li></ul></div><div class="hint-container danger"><p class="hint-container-title">å…³äºåˆå§‹åŒ–æ—¶ç”¨åˆ°çš„ç¯å¢ƒå˜é‡</p><ul><li><strong>APISERVER_NAME</strong> ä¸èƒ½æ˜¯ master çš„ hostname</li><li><strong>APISERVER_NAME</strong> å¿…é¡»å…¨ä¸ºå°å†™å­—æ¯ã€æ•°å­—ã€å°æ•°ç‚¹ï¼Œä¸èƒ½åŒ…å«å‡å·</li><li><strong>POD_SUBNET</strong> æ‰€ä½¿ç”¨çš„ç½‘æ®µä¸èƒ½ä¸ <em><strong>masterèŠ‚ç‚¹/workerèŠ‚ç‚¹</strong></em> æ‰€åœ¨çš„ç½‘æ®µé‡å ã€‚è¯¥å­—æ®µçš„å–å€¼ä¸ºä¸€ä¸ª <a href="/glossary/cidr.html" target="_blank">CIDR</a> å€¼ï¼Œå¦‚æœæ‚¨å¯¹ CIDR è¿™ä¸ªæ¦‚å¿µè¿˜ä¸ç†Ÿæ‚‰ï¼Œè¯·ä¸è¦ä¿®æ”¹è¿™ä¸ªå­—æ®µçš„å–å€¼ 10.100.0.1/16</li></ul></div>',11),F=n("div",{class:"language-bash line-numbers-mode","data-ext":"sh"},[n("pre",{class:"language-bash"},[n("code",null,[n("span",{class:"token comment"},"#åœ¨ç¬¬ä¸€ä¸ª master èŠ‚ç‚¹ demo-master-a-1 ä¸Šæ‰§è¡Œ"),s(`
`),n("span",{class:"token comment"},"# åªåœ¨ç¬¬ä¸€ä¸ª master èŠ‚ç‚¹æ‰§è¡Œ"),s(`
`),n("span",{class:"token comment"},"# æ›¿æ¢ apiserver.demo ä¸º æ‚¨æƒ³è¦çš„ dnsName"),s(`
`),n("span",{class:"token builtin class-name"},"export"),s(),n("span",{class:"token assign-left variable"},"APISERVER_NAME"),n("span",{class:"token operator"},"="),s(`apiserver.demo
`),n("span",{class:"token comment"},"# Kubernetes å®¹å™¨ç»„æ‰€åœ¨çš„ç½‘æ®µï¼Œè¯¥ç½‘æ®µå®‰è£…å®Œæˆåï¼Œç”± kubernetes åˆ›å»ºï¼Œäº‹å…ˆå¹¶ä¸å­˜åœ¨äºæ‚¨çš„ç‰©ç†ç½‘ç»œä¸­"),s(`
`),n("span",{class:"token builtin class-name"},"export"),s(),n("span",{class:"token assign-left variable"},"POD_SUBNET"),n("span",{class:"token operator"},"="),n("span",{class:"token number"},"10.100"),s(`.0.1/16
`),n("span",{class:"token builtin class-name"},"echo"),s(),n("span",{class:"token string"},[s('"127.0.0.1    '),n("span",{class:"token variable"},"${APISERVER_NAME}"),s('"')]),s(),n("span",{class:"token operator"},">>"),s(` /etc/hosts
`),n("span",{class:"token function"},"curl"),s(),n("span",{class:"token parameter variable"},"-sSL"),s(" https://kuboard.cn/install-script/v1.16.2/init_master.sh "),n("span",{class:"token operator"},"|"),s(),n("span",{class:"token function"},"sh"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),Z=n("div",{class:"language-bash line-numbers-mode","data-ext":"sh"},[n("pre",{class:"language-bash"},[n("code",null,[n("span",{class:"token comment"},"# åªåœ¨ç¬¬ä¸€ä¸ª master èŠ‚ç‚¹æ‰§è¡Œ"),s(`
`),n("span",{class:"token comment"},"# æ›¿æ¢ apiserver.demo ä¸º æ‚¨æƒ³è¦çš„ dnsName"),s(`
`),n("span",{class:"token builtin class-name"},"export"),s(),n("span",{class:"token assign-left variable"},"APISERVER_NAME"),n("span",{class:"token operator"},"="),s(`apiserver.demo
`),n("span",{class:"token comment"},"# Kubernetes å®¹å™¨ç»„æ‰€åœ¨çš„ç½‘æ®µï¼Œè¯¥ç½‘æ®µå®‰è£…å®Œæˆåï¼Œç”± kubernetes åˆ›å»ºï¼Œäº‹å…ˆå¹¶ä¸å­˜åœ¨äºæ‚¨çš„ç‰©ç†ç½‘ç»œä¸­"),s(`
`),n("span",{class:"token builtin class-name"},"export"),s(),n("span",{class:"token assign-left variable"},"POD_SUBNET"),n("span",{class:"token operator"},"="),n("span",{class:"token number"},"10.100"),s(`.0.1/16
`),n("span",{class:"token builtin class-name"},"echo"),s(),n("span",{class:"token string"},[s('"127.0.0.1    '),n("span",{class:"token variable"},"${APISERVER_NAME}"),s('"')]),s(),n("span",{class:"token operator"},">>"),s(` /etc/hosts
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),w=o(`<p><em><strong>æ‰§è¡Œç»“æœ</strong></em></p><p>æ‰§è¡Œç»“æœä¸­ï¼š</p><ul><li>ç¬¬15ã€16ã€17è¡Œï¼Œç”¨äºåˆå§‹åŒ–ç¬¬äºŒã€ä¸‰ä¸ª master èŠ‚ç‚¹</li><li>ç¬¬25ã€26è¡Œï¼Œç”¨äºåˆå§‹åŒ– worker èŠ‚ç‚¹</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>Your Kubernetes control-plane has initialized successfully<span class="token operator">!</span>

To start using your cluster, you need to run the following as a regular user:

  <span class="token function">mkdir</span> <span class="token parameter variable">-p</span> <span class="token environment constant">$HOME</span>/.kube
  <span class="token function">sudo</span> <span class="token function">cp</span> <span class="token parameter variable">-i</span> /etc/kubernetes/admin.conf <span class="token environment constant">$HOME</span>/.kube/config
  <span class="token function">sudo</span> <span class="token function">chown</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">id</span> <span class="token parameter variable">-u</span><span class="token variable">)</span></span><span class="token builtin class-name">:</span><span class="token variable"><span class="token variable">$(</span><span class="token function">id</span> <span class="token parameter variable">-g</span><span class="token variable">)</span></span> <span class="token environment constant">$HOME</span>/.kube/config

You should now deploy a pod network to the cluster.
Run <span class="token string">&quot;kubectl apply -f [podnetwork].yaml&quot;</span> with one of the options listed at:
  https://kubernetes.io/docs/concepts/cluster-administration/addons/

You can now <span class="token function">join</span> any number of the control-plane <span class="token function">node</span> running the following <span class="token builtin class-name">command</span> on each as root:

  kubeadm <span class="token function">join</span> apiserver.k8s:6443 <span class="token parameter variable">--token</span> 4z3r2v.2p43g28ons3b475v <span class="token punctuation">\\</span>
    --discovery-token-ca-cert-hash sha256:959569cbaaf0cf3fad744f8bd8b798ea9e11eb1e568c15825355879cf4cdc5d6 <span class="token punctuation">\\</span>
    --control-plane --certificate-key 41a741533a038a936759aff43b5680f0e8c41375614a873ea49fde8944614dd6

Please note that the certificate-key gives access to cluster sensitive data, keep it secret<span class="token operator">!</span>
As a safeguard, uploaded-certs will be deleted <span class="token keyword">in</span> two hours<span class="token punctuation">;</span> If necessary, you can use 
<span class="token string">&quot;kubeadm init phase upload-certs --upload-certs&quot;</span> to reload certs afterward.

Then you can <span class="token function">join</span> any number of worker nodes by running the following on each as root:

kubeadm <span class="token function">join</span> apiserver.k8s:6443 <span class="token parameter variable">--token</span> 4z3r2v.2p43g28ons3b475v <span class="token punctuation">\\</span>
    --discovery-token-ca-cert-hash sha256:959569cbaaf0cf3fad744f8bd8b798ea9e11eb1e568c15825355879cf4cdc5d6 

</code></pre><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div class="highlight-line">Â </div><div class="highlight-line">Â </div><div class="highlight-line">Â </div><br><br><br><br><br><br><br><div class="highlight-line">Â </div><div class="highlight-line">Â </div><br></div><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æ£€æŸ¥ master åˆå§‹åŒ–ç»“æœ</strong></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># åªåœ¨ç¬¬ä¸€ä¸ª master èŠ‚ç‚¹æ‰§è¡Œ</span>

<span class="token comment"># æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼Œç­‰å¾… 3-10 åˆ†é’Ÿï¼Œç›´åˆ°æ‰€æœ‰çš„å®¹å™¨ç»„å¤„äº Running çŠ¶æ€</span>
<span class="token function">watch</span> kubectl get pod <span class="token parameter variable">-n</span> kube-system <span class="token parameter variable">-o</span> wide

<span class="token comment"># æŸ¥çœ‹ master èŠ‚ç‚¹åˆå§‹åŒ–ç»“æœ</span>
kubectl get nodes
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container danger"><p class="hint-container-title">è­¦å‘Š</p><p>è¯·ç­‰åˆ°æ‰€æœ‰å®¹å™¨ç»„ï¼ˆå¤§çº¦9ä¸ªï¼‰å…¨éƒ¨å¤„äº Running çŠ¶æ€ï¼Œæ‰è¿›è¡Œä¸‹ä¸€æ­¥</p></div><h3 id="åˆå§‹åŒ–ç¬¬äºŒã€ä¸‰ä¸ªmasterèŠ‚ç‚¹" tabindex="-1"><a class="header-anchor" href="#åˆå§‹åŒ–ç¬¬äºŒã€ä¸‰ä¸ªmasterèŠ‚ç‚¹" aria-hidden="true">#</a> åˆå§‹åŒ–ç¬¬äºŒã€ä¸‰ä¸ªmasterèŠ‚ç‚¹</h3><p><strong>è·å¾— master èŠ‚ç‚¹çš„ join å‘½ä»¤</strong></p><blockquote><p>å¯ä»¥å’Œç¬¬ä¸€ä¸ªMasterèŠ‚ç‚¹ä¸€èµ·åˆå§‹åŒ–ç¬¬äºŒã€ä¸‰ä¸ªMasterèŠ‚ç‚¹ï¼Œä¹Ÿå¯ä»¥ä»å•MasterèŠ‚ç‚¹è°ƒæ•´è¿‡æ¥ï¼Œåªéœ€è¦</p><ul><li>å¢åŠ Masterçš„ LoadBalancer</li><li>å°†æ‰€æœ‰èŠ‚ç‚¹çš„ /etc/hosts æ–‡ä»¶ä¸­ apiserver.demo è§£æä¸º LoadBalancer çš„åœ°å€</li><li>æ·»åŠ ç¬¬äºŒã€ä¸‰ä¸ªMasterèŠ‚ç‚¹</li><li>åˆå§‹åŒ– master èŠ‚ç‚¹çš„ token æœ‰æ•ˆæ—¶é—´ä¸º 2 å°æ—¶</li></ul></blockquote>`,10),W=n("div",{class:"language-bash line-numbers-mode","data-ext":"sh"},[n("pre",{class:"language-bash"},[n("code",null,[s("  kubeadm "),n("span",{class:"token function"},"join"),s(" apiserver.k8s:6443 "),n("span",{class:"token parameter variable"},"--token"),s(" 4z3r2v.2p43g28ons3b475v "),n("span",{class:"token punctuation"},"\\"),s(`
    --discovery-token-ca-cert-hash sha256:959569cbaaf0cf3fad744f8bd8b798ea9e11eb1e568c15825355879cf4cdc5d6 `),n("span",{class:"token punctuation"},"\\"),s(`
    --control-plane --certificate-key 41a741533a038a936759aff43b5680f0e8c41375614a873ea49fde8944614dd6
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),M=n("p",null,[n("strong",null,"è·å¾— certificate key")],-1),z=n("p",null,"åœ¨ demo-master-a-1 ä¸Šæ‰§è¡Œ",-1),Q=n("div",{class:"language-bash line-numbers-mode","data-ext":"sh"},[n("pre",{class:"language-bash"},[n("code",null,[n("span",{class:"token comment"},"# åªåœ¨ ç¬¬ä¸€ä¸ª master èŠ‚ç‚¹ demo-master-a-1 ä¸Šæ‰§è¡Œ"),s(`
kubeadm init phase upload-certs --upload-certs
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),j=n("p",null,"è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š",-1),C=n("div",{class:"language-bash line-numbers-mode","data-ext":"sh"},[n("pre",{class:"language-bash"},[n("code",null,[n("span",{class:"token punctuation"},"["),s("root@demo-master-a-1 ~"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token comment"},"# kubeadm init phase upload-certs --upload-certs"),s(`
W0902 09:05:28.355623    `),n("span",{class:"token number"},"1046"),s(" version.go:98"),n("span",{class:"token punctuation"},"]"),s(" could not fetch a Kubernetes version from the internet: unable to get URL "),n("span",{class:"token string"},'"https://dl.k8s.io/release/stable-1.txt"'),n("span",{class:"token builtin class-name"},":"),s(" Get https://dl.k8s.io/release/stable-1.txt: net/http: request canceled "),n("span",{class:"token keyword"},"while"),s(" waiting "),n("span",{class:"token keyword"},"for"),s(" connection "),n("span",{class:"token punctuation"},"("),s("Client.Timeout exceeded "),n("span",{class:"token keyword"},"while"),s(" awaiting headers"),n("span",{class:"token punctuation"},")"),s(`
W0902 09:05:28.355718    `),n("span",{class:"token number"},"1046"),s(" version.go:99"),n("span",{class:"token punctuation"},"]"),s(" falling back to the "),n("span",{class:"token builtin class-name"},"local"),s(` client version: v1.16.2
`),n("span",{class:"token punctuation"},"["),s("upload-certs"),n("span",{class:"token punctuation"},"]"),s(" Storing the certificates "),n("span",{class:"token keyword"},"in"),s(" Secret "),n("span",{class:"token string"},'"kubeadm-certs"'),s(),n("span",{class:"token keyword"},"in"),s(" the "),n("span",{class:"token string"},'"kube-system"'),s(` Namespace
`),n("span",{class:"token punctuation"},"["),s("upload-certs"),n("span",{class:"token punctuation"},"]"),s(` Using certificate key:
70eb87e62f052d2d5de759969d5b42f372d0ad798f98df38f7fe73efdf63a13c
`)])]),n("div",{class:"highlight-lines"},[n("br"),n("br"),n("br"),n("br"),n("br"),n("div",{class:"highlight-line"},"Â ")]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),I=n("p",null,[n("strong",null,"è·å¾— join å‘½ä»¤")],-1),Y=n("p",null,"åœ¨ demo-master-a-1 ä¸Šæ‰§è¡Œ",-1),q=n("div",{class:"language-bash line-numbers-mode","data-ext":"sh"},[n("pre",{class:"language-bash"},[n("code",null,[n("span",{class:"token comment"},"# åªåœ¨ ç¬¬ä¸€ä¸ª master èŠ‚ç‚¹ demo-master-a-1 ä¸Šæ‰§è¡Œ"),s(`
kubeadm token create --print-join-command
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),B=n("p",null,"è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š",-1),P=n("div",{class:"language-bash line-numbers-mode","data-ext":"sh"},[n("pre",{class:"language-bash"},[n("code",null,[n("span",{class:"token punctuation"},"["),s("root@demo-master-a-1 ~"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token comment"},"# kubeadm token create --print-join-command"),s(`
kubeadm `),n("span",{class:"token function"},"join"),s(" apiserver.demo:6443 "),n("span",{class:"token parameter variable"},"--token"),s(` bl80xo.hfewon9l5jlpmjft     --discovery-token-ca-cert-hash sha256:b4d2bed371fe4603b83e7504051dcfcdebcbdcacd8be27884223c4ccc13059a4 
`)])]),n("div",{class:"highlight-lines"},[n("br"),n("div",{class:"highlight-line"},"Â ")]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),A=n("p",null,"åˆ™ï¼Œç¬¬äºŒã€ä¸‰ä¸ª master èŠ‚ç‚¹çš„ join å‘½ä»¤å¦‚ä¸‹ï¼š",-1),J=n("ul",null,[n("li",null,"å‘½ä»¤è¡Œä¸­ï¼Œè“è‰²éƒ¨åˆ†æ¥è‡ªäºå‰é¢è·å¾—çš„ join å‘½ä»¤ï¼Œçº¢è‰²éƒ¨åˆ†æ¥è‡ªäºå‰é¢è·å¾—çš„ certificate key")],-1),G={style:{"background-color":"#ddd",padding:"20px","line-height":"20px"}},D=n("br",null,null,-1),K=n("br",null,null,-1),O=o(`<p><strong>åˆå§‹åŒ–ç¬¬äºŒã€ä¸‰ä¸ª master èŠ‚ç‚¹</strong></p><p>åœ¨ demo-master-b-1 å’Œ demo-master-b-2 æœºå™¨ä¸Šæ‰§è¡Œ</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># åªåœ¨ç¬¬äºŒã€ä¸‰ä¸ª master èŠ‚ç‚¹ demo-master-b-1 å’Œ demo-master-b-2 æ‰§è¡Œ</span>
<span class="token comment"># æ›¿æ¢ x.x.x.x ä¸º ApiServer LoadBalancer çš„ IP åœ°å€</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable">APISERVER_IP</span><span class="token operator">=</span>x.x.x.x
<span class="token comment"># æ›¿æ¢ apiserver.demo ä¸º å‰é¢å·²ç»ä½¿ç”¨çš„ dnsName</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable">APISERVER_NAME</span><span class="token operator">=</span>apiserver.demo
<span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">\${APISERVER_IP}</span>    <span class="token variable">\${APISERVER_NAME}</span>&quot;</span> <span class="token operator">&gt;&gt;</span> /etc/hosts
<span class="token comment"># ä½¿ç”¨å‰é¢æ­¥éª¤ä¸­è·å¾—çš„ç¬¬äºŒã€ä¸‰ä¸ª master èŠ‚ç‚¹çš„ join å‘½ä»¤</span>
kubeadm <span class="token function">join</span> apiserver.demo:6443 <span class="token parameter variable">--token</span> ejwx62.vqwog6il5p83uk7y <span class="token punctuation">\\</span>
--discovery-token-ca-cert-hash sha256:6f7a8e40a810323672de5eee6f4d19aa2dbdb38411845a1bf5dd63485c43d303 <span class="token punctuation">\\</span>
--control-plane --certificate-key 70eb87e62f052d2d5de759969d5b42f372d0ad798f98df38f7fe73efdf63a13c
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container tip"><p class="hint-container-title">å¸¸è§é—®é¢˜</p><p>å¦‚æœä¸€ç›´åœç•™åœ¨ pre-flight çŠ¶æ€ï¼Œè¯·åœ¨ç¬¬äºŒã€ä¸‰ä¸ªèŠ‚ç‚¹ä¸Šæ‰§è¡Œå‘½ä»¤æ£€æŸ¥ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">curl</span> <span class="token parameter variable">-ik</span> https://apiserver.demo:6443/version
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>è¾“å‡ºç»“æœåº”è¯¥å¦‚ä¸‹æ‰€ç¤º</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>HTTP/1.1 200 OK
Cache-Control: no-cache, private
Content-Type: application/json
Date: Wed, 30 Oct 2019 08:13:39 GMT
Content-Length: 263

{
  &quot;major&quot;: &quot;1&quot;,
  &quot;minor&quot;: &quot;16&quot;,
  &quot;gitVersion&quot;: &quot;v1.16.2&quot;,
  &quot;gitCommit&quot;: &quot;2bd9643cee5b3b3a5ecbd3af49d09018f0773c77&quot;,
  &quot;gitTreeState&quot;: &quot;clean&quot;,
  &quot;buildDate&quot;: &quot;2019-09-18T14:27:17Z&quot;,
  &quot;goVersion&quot;: &quot;go1.12.9&quot;,
  &quot;compiler&quot;: &quot;gc&quot;,
  &quot;platform&quot;: &quot;linux/amd64&quot;
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦åˆ™ï¼Œè¯·æ‚¨æ£€æŸ¥ä¸€ä¸‹æ‚¨çš„ Loadbalancer æ˜¯å¦è®¾ç½®æ­£ç¡®</p></div><p><strong>æ£€æŸ¥ master åˆå§‹åŒ–ç»“æœ</strong></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># åªåœ¨ç¬¬ä¸€ä¸ª master èŠ‚ç‚¹ demo-master-a-1 æ‰§è¡Œ</span>
<span class="token comment"># æŸ¥çœ‹ master èŠ‚ç‚¹åˆå§‹åŒ–ç»“æœ</span>
kubectl get nodes
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,6),L=n("h2",{id:"åˆå§‹åŒ–-workerèŠ‚ç‚¹",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#åˆå§‹åŒ–-workerèŠ‚ç‚¹","aria-hidden":"true"},"#"),s(" åˆå§‹åŒ– workerèŠ‚ç‚¹")],-1),H=n("h3",{id:"è·å¾—-joinå‘½ä»¤å‚æ•°",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#è·å¾—-joinå‘½ä»¤å‚æ•°","aria-hidden":"true"},"#"),s(" è·å¾— joinå‘½ä»¤å‚æ•°")],-1),X=n("div",{class:"language-bash line-numbers-mode","data-ext":"sh"},[n("pre",{class:"language-bash"},[n("code",null,[s("  kubeadm "),n("span",{class:"token function"},"join"),s(" apiserver.k8s:6443 "),n("span",{class:"token parameter variable"},"--token"),s(" 4z3r2v.2p43g28ons3b475v "),n("span",{class:"token punctuation"},"\\"),s(`
    --discovery-token-ca-cert-hash sha256:959569cbaaf0cf3fad744f8bd8b798ea9e11eb1e568c15825355879cf4cdc5d6
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),$=n("p",null,[n("strong",null,"åœ¨ç¬¬ä¸€ä¸ª master èŠ‚ç‚¹ demo-master-a-1 èŠ‚ç‚¹æ‰§è¡Œ")],-1),nn=n("div",{class:"language-bash line-numbers-mode","data-ext":"sh"},[n("pre",{class:"language-bash"},[n("code",null,[n("span",{class:"token comment"},"# åªåœ¨ç¬¬ä¸€ä¸ª master èŠ‚ç‚¹ demo-master-a-1 ä¸Šæ‰§è¡Œ"),s(`
kubeadm token create --print-join-command
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),sn=n("p",null,"å¯è·å–kubeadm join å‘½ä»¤åŠå‚æ•°ï¼Œå¦‚ä¸‹æ‰€ç¤º",-1),en=n("div",{class:"language-bash line-numbers-mode","data-ext":"sh"},[n("pre",{class:"language-bash"},[n("code",null,[s("kubeadm "),n("span",{class:"token function"},"join"),s(" apiserver.demo:6443 "),n("span",{class:"token parameter variable"},"--token"),s(` mpfjma.4vjjg8flqihor4vt     --discovery-token-ca-cert-hash sha256:6f7a8e40a810323672de5eee6f4d19aa2dbdb38411845a1bf5dd63485c43d303
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"})])],-1),an=n("p",null,null,-1),tn=o(`<div class="hint-container tip"><p class="hint-container-title">æœ‰æ•ˆæ—¶é—´</p><p>è¯¥ token çš„æœ‰æ•ˆæ—¶é—´ä¸º 2 ä¸ªå°æ—¶ï¼Œ2å°æ—¶å†…ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨æ­¤ token åˆå§‹åŒ–ä»»æ„æ•°é‡çš„ worker èŠ‚ç‚¹ã€‚</p></div><h3 id="åˆå§‹åŒ–worker" tabindex="-1"><a class="header-anchor" href="#åˆå§‹åŒ–worker" aria-hidden="true">#</a> åˆå§‹åŒ–worker</h3><p><strong>é’ˆå¯¹æ‰€æœ‰çš„ worker èŠ‚ç‚¹æ‰§è¡Œ</strong></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># åªåœ¨ worker èŠ‚ç‚¹æ‰§è¡Œ</span>
<span class="token comment"># æ›¿æ¢ x.x.x.x ä¸º ApiServer LoadBalancer çš„ IP åœ°å€</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable">MASTER_IP</span><span class="token operator">=</span>x.x.x.x
<span class="token comment"># æ›¿æ¢ apiserver.demo ä¸ºåˆå§‹åŒ– master èŠ‚ç‚¹æ—¶æ‰€ä½¿ç”¨çš„ APISERVER_NAME</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable">APISERVER_NAME</span><span class="token operator">=</span>apiserver.demo
<span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">\${MASTER_IP}</span>    <span class="token variable">\${APISERVER_NAME}</span>&quot;</span> <span class="token operator">&gt;&gt;</span> /etc/hosts

<span class="token comment"># æ›¿æ¢ä¸ºå‰é¢ kubeadm token create --print-join-command çš„è¾“å‡ºç»“æœ</span>
kubeadm <span class="token function">join</span> apiserver.demo:6443 <span class="token parameter variable">--token</span> mpfjma.4vjjg8flqihor4vt     --discovery-token-ca-cert-hash sha256:6f7a8e40a810323672de5eee6f4d19aa2dbdb38411845a1bf5dd63485c43d303
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="æ£€æŸ¥-worker-åˆå§‹åŒ–ç»“æœ" tabindex="-1"><a class="header-anchor" href="#æ£€æŸ¥-worker-åˆå§‹åŒ–ç»“æœ" aria-hidden="true">#</a> æ£€æŸ¥ worker åˆå§‹åŒ–ç»“æœ</h3><p>åœ¨ç¬¬ä¸€ä¸ªmasterèŠ‚ç‚¹ demo-master-a-1 ä¸Šæ‰§è¡Œ</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># åªåœ¨ç¬¬ä¸€ä¸ª master èŠ‚ç‚¹ demo-master-a-1 ä¸Šæ‰§è¡Œ</span>
kubectl get nodes
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ç§»é™¤-worker-èŠ‚ç‚¹" tabindex="-1"><a class="header-anchor" href="#ç§»é™¤-worker-èŠ‚ç‚¹" aria-hidden="true">#</a> ç§»é™¤ worker èŠ‚ç‚¹</h2><div class="hint-container warning"><p class="hint-container-title">æ³¨æ„</p><p>æ­£å¸¸æƒ…å†µä¸‹ï¼Œæ‚¨æ— éœ€ç§»é™¤ worker èŠ‚ç‚¹</p></div><p>åœ¨å‡†å¤‡ç§»é™¤çš„ worker èŠ‚ç‚¹ä¸Šæ‰§è¡Œ</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>kubeadm reset
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>åœ¨ç¬¬ä¸€ä¸ª master èŠ‚ç‚¹ demo-master-a-1 ä¸Šæ‰§è¡Œ</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>kubectl delete <span class="token function">node</span> demo-worker-x-x
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><blockquote><ul><li>å°† demo-worker-x-x æ›¿æ¢ä¸ºè¦ç§»é™¤çš„ worker èŠ‚ç‚¹çš„åå­—</li><li>worker èŠ‚ç‚¹çš„åå­—å¯ä»¥é€šè¿‡åœ¨ç¬¬ä¸€ä¸ª master èŠ‚ç‚¹ demo-master-a-1 ä¸Šæ‰§è¡Œ kubectl get nodes å‘½ä»¤è·å¾—</li></ul></blockquote><h2 id="å®‰è£…-ingress-controller" tabindex="-1"><a class="header-anchor" href="#å®‰è£…-ingress-controller" aria-hidden="true">#</a> å®‰è£… Ingress Controller</h2>`,15),ln={href:"https://github.com/nginxinc/kubernetes-ingress",target:"_blank",rel:"noopener noreferrer"},cn={class:"hint-container info"},on=n("p",{class:"hint-container-title"},"å‚è€ƒæ–‡æ¡£",-1),rn={href:"https://kubernetes.io/docs/concepts/services-networking/ingress/",target:"_blank",rel:"noopener noreferrer"},un={href:"https://kubernetes.io/docs/concepts/services-networking/ingress/",target:"_blank",rel:"noopener noreferrer"},dn={href:"https://github.com/nginxinc/kubernetes-ingress",target:"_blank",rel:"noopener noreferrer"},pn=n("p",null,[n("strong",null,"åœ¨ master èŠ‚ç‚¹ä¸Šæ‰§è¡Œ")],-1),kn=n("div",{class:"language-bash line-numbers-mode","data-ext":"sh"},[n("pre",{class:"language-bash"},[n("code",null,[n("span",{class:"token comment"},"# åªåœ¨ç¬¬ä¸€ä¸ª master èŠ‚ç‚¹ demo-master-a-1 ä¸Šæ‰§è¡Œ"),s(`
kubectl apply `),n("span",{class:"token parameter variable"},"-f"),s(` https://kuboard.cn/install-script/v1.16.2/nginx-ingress.yaml
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),mn=n("div",{class:"language-yaml line-numbers-mode","data-ext":"yml"},[n("pre",{class:"language-yaml"},[n("code",null,[n("span",{class:"token comment"},"# å¦‚æœæ‰“ç®—ç”¨äºç”Ÿäº§ç¯å¢ƒï¼Œè¯·å‚è€ƒ https://github.com/nginxinc/kubernetes-ingress/blob/v1.5.5/docs/installation.md å¹¶æ ¹æ®æ‚¨è‡ªå·±çš„æƒ…å†µåšè¿›ä¸€æ­¥å®šåˆ¶"),s(`

`),n("span",{class:"token key atrule"},"apiVersion"),n("span",{class:"token punctuation"},":"),s(` v1
`),n("span",{class:"token key atrule"},"kind"),n("span",{class:"token punctuation"},":"),s(` Namespace
`),n("span",{class:"token key atrule"},"metadata"),n("span",{class:"token punctuation"},":"),s(`
  `),n("span",{class:"token key atrule"},"name"),n("span",{class:"token punctuation"},":"),s(" nginx"),n("span",{class:"token punctuation"},"-"),s(`ingress

`),n("span",{class:"token punctuation"},"---"),s(`
`),n("span",{class:"token key atrule"},"apiVersion"),n("span",{class:"token punctuation"},":"),s(` v1
`),n("span",{class:"token key atrule"},"kind"),n("span",{class:"token punctuation"},":"),s(` ServiceAccount
`),n("span",{class:"token key atrule"},"metadata"),n("span",{class:"token punctuation"},":"),s(`
  `),n("span",{class:"token key atrule"},"name"),n("span",{class:"token punctuation"},":"),s(" nginx"),n("span",{class:"token punctuation"},"-"),s(`ingress 
  `),n("span",{class:"token key atrule"},"namespace"),n("span",{class:"token punctuation"},":"),s(" nginx"),n("span",{class:"token punctuation"},"-"),s(`ingress

`),n("span",{class:"token punctuation"},"---"),s(`
`),n("span",{class:"token key atrule"},"apiVersion"),n("span",{class:"token punctuation"},":"),s(` v1
`),n("span",{class:"token key atrule"},"kind"),n("span",{class:"token punctuation"},":"),s(` Secret
`),n("span",{class:"token key atrule"},"metadata"),n("span",{class:"token punctuation"},":"),s(`
  `),n("span",{class:"token key atrule"},"name"),n("span",{class:"token punctuation"},":"),s(" default"),n("span",{class:"token punctuation"},"-"),s("server"),n("span",{class:"token punctuation"},"-"),s(`secret
  `),n("span",{class:"token key atrule"},"namespace"),n("span",{class:"token punctuation"},":"),s(" nginx"),n("span",{class:"token punctuation"},"-"),s(`ingress
`),n("span",{class:"token key atrule"},"type"),n("span",{class:"token punctuation"},":"),s(` Opaque
`),n("span",{class:"token key atrule"},"data"),n("span",{class:"token punctuation"},":"),s(`
  `),n("span",{class:"token key atrule"},"tls.crt"),n("span",{class:"token punctuation"},":"),s(` LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUN2akNDQWFZQ0NRREFPRjl0THNhWFhEQU5CZ2txaGtpRzl3MEJBUXNGQURBaE1SOHdIUVlEVlFRRERCWk8KUjBsT1dFbHVaM0psYzNORGIyNTBjbTlzYkdWeU1CNFhEVEU0TURreE1qRTRNRE16TlZvWERUSXpNRGt4TVRFNApNRE16TlZvd0lURWZNQjBHQTFVRUF3d1dUa2RKVGxoSmJtZHlaWE56UTI5dWRISnZiR3hsY2pDQ0FTSXdEUVlKCktvWklodmNOQVFFQkJRQURnZ0VQQURDQ0FRb0NnZ0VCQUwvN2hIUEtFWGRMdjNyaUM3QlBrMTNpWkt5eTlyQ08KR2xZUXYyK2EzUDF0azIrS3YwVGF5aGRCbDRrcnNUcTZzZm8vWUk1Y2Vhbkw4WGM3U1pyQkVRYm9EN2REbWs1Qgo4eDZLS2xHWU5IWlg0Rm5UZ0VPaStlM2ptTFFxRlBSY1kzVnNPazFFeUZBL0JnWlJVbkNHZUtGeERSN0tQdGhyCmtqSXVuektURXUyaDU4Tlp0S21ScUJHdDEwcTNRYzhZT3ExM2FnbmovUWRjc0ZYYTJnMjB1K1lYZDdoZ3krZksKWk4vVUkxQUQ0YzZyM1lma1ZWUmVHd1lxQVp1WXN2V0RKbW1GNWRwdEMzN011cDBPRUxVTExSakZJOTZXNXIwSAo1TmdPc25NWFJNV1hYVlpiNWRxT3R0SmRtS3FhZ25TZ1JQQVpQN2MwQjFQU2FqYzZjNGZRVXpNQ0F3RUFBVEFOCkJna3Foa2lHOXcwQkFRc0ZBQU9DQVFFQWpLb2tRdGRPcEsrTzhibWVPc3lySmdJSXJycVFVY2ZOUitjb0hZVUoKdGhrYnhITFMzR3VBTWI5dm15VExPY2xxeC9aYzJPblEwMEJCLzlTb0swcitFZ1U2UlVrRWtWcitTTFA3NTdUWgozZWI4dmdPdEduMS9ienM3bzNBaS9kclkrcUI5Q2k1S3lPc3FHTG1US2xFaUtOYkcyR1ZyTWxjS0ZYQU80YTY3Cklnc1hzYktNbTQwV1U3cG9mcGltU1ZmaXFSdkV5YmN3N0NYODF6cFErUyt1eHRYK2VBZ3V0NHh3VlI5d2IyVXYKelhuZk9HbWhWNThDd1dIQnNKa0kxNXhaa2VUWXdSN0diaEFMSkZUUkk3dkhvQXprTWIzbjAxQjQyWjNrN3RXNQpJUDFmTlpIOFUvOWxiUHNoT21FRFZkdjF5ZytVRVJxbStGSis2R0oxeFJGcGZnPT0KLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo=
  `),n("span",{class:"token key atrule"},"tls.key"),n("span",{class:"token punctuation"},":"),s(` LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFcEFJQkFBS0NBUUVBdi91RWM4b1JkMHUvZXVJTHNFK1RYZUprckxMMnNJNGFWaEMvYjVyYy9XMlRiNHEvClJOcktGMEdYaVN1eE9ycXgrajlnamx4NXFjdnhkenRKbXNFUkJ1Z1B0ME9hVGtIekhvb3FVWmcwZGxmZ1dkT0EKUTZMNTdlT1l0Q29VOUZ4amRXdzZUVVRJVUQ4R0JsRlNjSVo0b1hFTkhzbysyR3VTTWk2Zk1wTVM3YUhudzFtMApxWkdvRWEzWFNyZEJ6eGc2clhkcUNlUDlCMXl3VmRyYURiUzc1aGQzdUdETDU4cGszOVFqVUFQaHpxdmRoK1JWClZGNGJCaW9CbTVpeTlZTW1hWVhsMm0wTGZzeTZuUTRRdFFzdEdNVWozcGJtdlFmazJBNnljeGRFeFpkZFZsdmwKMm82MjBsMllxcHFDZEtCRThCay90elFIVTlKcU56cHpoOUJUTXdJREFRQUJBb0lCQVFDZklHbXowOHhRVmorNwpLZnZJUXQwQ0YzR2MxNld6eDhVNml4MHg4Mm15d1kxUUNlL3BzWE9LZlRxT1h1SENyUlp5TnUvZ2IvUUQ4bUFOCmxOMjRZTWl0TWRJODg5TEZoTkp3QU5OODJDeTczckM5bzVvUDlkazAvYzRIbjAzSkVYNzZ5QjgzQm9rR1FvYksKMjhMNk0rdHUzUmFqNjd6Vmc2d2szaEhrU0pXSzBwV1YrSjdrUkRWYmhDYUZhNk5nMUZNRWxhTlozVDhhUUtyQgpDUDNDeEFTdjYxWTk5TEI4KzNXWVFIK3NYaTVGM01pYVNBZ1BkQUk3WEh1dXFET1lvMU5PL0JoSGt1aVg2QnRtCnorNTZud2pZMy8yUytSRmNBc3JMTnIwMDJZZi9oY0IraVlDNzVWYmcydVd6WTY3TWdOTGQ5VW9RU3BDRkYrVm4KM0cyUnhybnhBb0dCQU40U3M0ZVlPU2huMVpQQjdhTUZsY0k2RHR2S2ErTGZTTXFyY2pOZjJlSEpZNnhubmxKdgpGenpGL2RiVWVTbWxSekR0WkdlcXZXaHFISy9iTjIyeWJhOU1WMDlRQ0JFTk5jNmtWajJTVHpUWkJVbEx4QzYrCk93Z0wyZHhKendWelU0VC84ajdHalRUN05BZVpFS2FvRHFyRG5BYWkyaW5oZU1JVWZHRXFGKzJyQW9HQkFOMVAKK0tZL0lsS3RWRzRKSklQNzBjUis3RmpyeXJpY05iWCtQVzUvOXFHaWxnY2grZ3l4b25BWlBpd2NpeDN3QVpGdwpaZC96ZFB2aTBkWEppc1BSZjRMazg5b2pCUmpiRmRmc2l5UmJYbyt3TFU4NUhRU2NGMnN5aUFPaTVBRHdVU0FkCm45YWFweUNweEFkREtERHdObit3ZFhtaTZ0OHRpSFRkK3RoVDhkaVpBb0dCQUt6Wis1bG9OOTBtYlF4VVh5YUwKMjFSUm9tMGJjcndsTmVCaWNFSmlzaEhYa2xpSVVxZ3hSZklNM2hhUVRUcklKZENFaHFsV01aV0xPb2I2NTNyZgo3aFlMSXM1ZUtka3o0aFRVdnpldm9TMHVXcm9CV2xOVHlGanIrSWhKZnZUc0hpOGdsU3FkbXgySkJhZUFVWUNXCndNdlQ4NmNLclNyNkQrZG8wS05FZzFsL0FvR0FlMkFVdHVFbFNqLzBmRzgrV3hHc1RFV1JqclRNUzRSUjhRWXQKeXdjdFA4aDZxTGxKUTRCWGxQU05rMXZLTmtOUkxIb2pZT2pCQTViYjhibXNVU1BlV09NNENoaFJ4QnlHbmR2eAphYkJDRkFwY0IvbEg4d1R0alVZYlN5T294ZGt5OEp0ek90ajJhS0FiZHd6NlArWDZDODhjZmxYVFo5MWpYL3RMCjF3TmRKS2tDZ1lCbyt0UzB5TzJ2SWFmK2UwSkN5TGhzVDQ5cTN3Zis2QWVqWGx2WDJ1VnRYejN5QTZnbXo5aCsKcDNlK2JMRUxwb3B0WFhNdUFRR0xhUkcrYlNNcjR5dERYbE5ZSndUeThXczNKY3dlSTdqZVp2b0ZpbmNvVlVIMwphdmxoTUVCRGYxSjltSDB5cDBwWUNaS2ROdHNvZEZtQktzVEtQMjJhTmtsVVhCS3gyZzR6cFE9PQotLS0tLUVORCBSU0EgUFJJVkFURSBLRVktLS0tLQo=

`),n("span",{class:"token punctuation"},"---"),s(`
`),n("span",{class:"token key atrule"},"kind"),n("span",{class:"token punctuation"},":"),s(` ConfigMap
`),n("span",{class:"token key atrule"},"apiVersion"),n("span",{class:"token punctuation"},":"),s(` v1
`),n("span",{class:"token key atrule"},"metadata"),n("span",{class:"token punctuation"},":"),s(`
  `),n("span",{class:"token key atrule"},"name"),n("span",{class:"token punctuation"},":"),s(" nginx"),n("span",{class:"token punctuation"},"-"),s(`config
  `),n("span",{class:"token key atrule"},"namespace"),n("span",{class:"token punctuation"},":"),s(" nginx"),n("span",{class:"token punctuation"},"-"),s(`ingress
`),n("span",{class:"token key atrule"},"data"),n("span",{class:"token punctuation"},":"),s(`
  `),n("span",{class:"token key atrule"},"server-names-hash-bucket-size"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token string"},'"1024"'),s(`


`),n("span",{class:"token punctuation"},"---"),s(`
`),n("span",{class:"token key atrule"},"kind"),n("span",{class:"token punctuation"},":"),s(` ClusterRole
`),n("span",{class:"token key atrule"},"apiVersion"),n("span",{class:"token punctuation"},":"),s(` rbac.authorization.k8s.io/v1beta1
`),n("span",{class:"token key atrule"},"metadata"),n("span",{class:"token punctuation"},":"),s(`
  `),n("span",{class:"token key atrule"},"name"),n("span",{class:"token punctuation"},":"),s(" nginx"),n("span",{class:"token punctuation"},"-"),s(`ingress
`),n("span",{class:"token key atrule"},"rules"),n("span",{class:"token punctuation"},":"),s(`
`),n("span",{class:"token punctuation"},"-"),s(),n("span",{class:"token key atrule"},"apiGroups"),n("span",{class:"token punctuation"},":"),s(`
  `),n("span",{class:"token punctuation"},"-"),s(),n("span",{class:"token string"},'""'),s(`
  `),n("span",{class:"token key atrule"},"resources"),n("span",{class:"token punctuation"},":"),s(`
  `),n("span",{class:"token punctuation"},"-"),s(` services
  `),n("span",{class:"token punctuation"},"-"),s(` endpoints
  `),n("span",{class:"token key atrule"},"verbs"),n("span",{class:"token punctuation"},":"),s(`
  `),n("span",{class:"token punctuation"},"-"),s(` get
  `),n("span",{class:"token punctuation"},"-"),s(` list
  `),n("span",{class:"token punctuation"},"-"),s(` watch
`),n("span",{class:"token punctuation"},"-"),s(),n("span",{class:"token key atrule"},"apiGroups"),n("span",{class:"token punctuation"},":"),s(`
  `),n("span",{class:"token punctuation"},"-"),s(),n("span",{class:"token string"},'""'),s(`
  `),n("span",{class:"token key atrule"},"resources"),n("span",{class:"token punctuation"},":"),s(`
  `),n("span",{class:"token punctuation"},"-"),s(` secrets
  `),n("span",{class:"token key atrule"},"verbs"),n("span",{class:"token punctuation"},":"),s(`
  `),n("span",{class:"token punctuation"},"-"),s(` get
  `),n("span",{class:"token punctuation"},"-"),s(` list
  `),n("span",{class:"token punctuation"},"-"),s(` watch
`),n("span",{class:"token punctuation"},"-"),s(),n("span",{class:"token key atrule"},"apiGroups"),n("span",{class:"token punctuation"},":"),s(`
  `),n("span",{class:"token punctuation"},"-"),s(),n("span",{class:"token string"},'""'),s(`
  `),n("span",{class:"token key atrule"},"resources"),n("span",{class:"token punctuation"},":"),s(`
  `),n("span",{class:"token punctuation"},"-"),s(` configmaps
  `),n("span",{class:"token key atrule"},"verbs"),n("span",{class:"token punctuation"},":"),s(`
  `),n("span",{class:"token punctuation"},"-"),s(` get
  `),n("span",{class:"token punctuation"},"-"),s(` list
  `),n("span",{class:"token punctuation"},"-"),s(` watch
  `),n("span",{class:"token punctuation"},"-"),s(` update
  `),n("span",{class:"token punctuation"},"-"),s(` create
`),n("span",{class:"token punctuation"},"-"),s(),n("span",{class:"token key atrule"},"apiGroups"),n("span",{class:"token punctuation"},":"),s(`
  `),n("span",{class:"token punctuation"},"-"),s(),n("span",{class:"token string"},'""'),s(`
  `),n("span",{class:"token key atrule"},"resources"),n("span",{class:"token punctuation"},":"),s(`
  `),n("span",{class:"token punctuation"},"-"),s(` pods
  `),n("span",{class:"token key atrule"},"verbs"),n("span",{class:"token punctuation"},":"),s(`
  `),n("span",{class:"token punctuation"},"-"),s(` list
`),n("span",{class:"token punctuation"},"-"),s(),n("span",{class:"token key atrule"},"apiGroups"),n("span",{class:"token punctuation"},":"),s(`
  `),n("span",{class:"token punctuation"},"-"),s(),n("span",{class:"token string"},'""'),s(`
  `),n("span",{class:"token key atrule"},"resources"),n("span",{class:"token punctuation"},":"),s(`
  `),n("span",{class:"token punctuation"},"-"),s(` events
  `),n("span",{class:"token key atrule"},"verbs"),n("span",{class:"token punctuation"},":"),s(`
  `),n("span",{class:"token punctuation"},"-"),s(` create
  `),n("span",{class:"token punctuation"},"-"),s(` patch
`),n("span",{class:"token punctuation"},"-"),s(),n("span",{class:"token key atrule"},"apiGroups"),n("span",{class:"token punctuation"},":"),s(`
  `),n("span",{class:"token punctuation"},"-"),s(` extensions
  `),n("span",{class:"token key atrule"},"resources"),n("span",{class:"token punctuation"},":"),s(`
  `),n("span",{class:"token punctuation"},"-"),s(` ingresses
  `),n("span",{class:"token key atrule"},"verbs"),n("span",{class:"token punctuation"},":"),s(`
  `),n("span",{class:"token punctuation"},"-"),s(` list
  `),n("span",{class:"token punctuation"},"-"),s(` watch
  `),n("span",{class:"token punctuation"},"-"),s(` get
`),n("span",{class:"token punctuation"},"-"),s(),n("span",{class:"token key atrule"},"apiGroups"),n("span",{class:"token punctuation"},":"),s(`
  `),n("span",{class:"token punctuation"},"-"),s(),n("span",{class:"token string"},'"extensions"'),s(`
  `),n("span",{class:"token key atrule"},"resources"),n("span",{class:"token punctuation"},":"),s(`
  `),n("span",{class:"token punctuation"},"-"),s(` ingresses/status
  `),n("span",{class:"token key atrule"},"verbs"),n("span",{class:"token punctuation"},":"),s(`
  `),n("span",{class:"token punctuation"},"-"),s(` update
`),n("span",{class:"token punctuation"},"-"),s(),n("span",{class:"token key atrule"},"apiGroups"),n("span",{class:"token punctuation"},":"),s(`
  `),n("span",{class:"token punctuation"},"-"),s(` k8s.nginx.org
  `),n("span",{class:"token key atrule"},"resources"),n("span",{class:"token punctuation"},":"),s(`
  `),n("span",{class:"token punctuation"},"-"),s(` virtualservers
  `),n("span",{class:"token punctuation"},"-"),s(` virtualserverroutes
  `),n("span",{class:"token key atrule"},"verbs"),n("span",{class:"token punctuation"},":"),s(`
  `),n("span",{class:"token punctuation"},"-"),s(` list
  `),n("span",{class:"token punctuation"},"-"),s(` watch
  `),n("span",{class:"token punctuation"},"-"),s(` get

`),n("span",{class:"token punctuation"},"---"),s(`
`),n("span",{class:"token key atrule"},"kind"),n("span",{class:"token punctuation"},":"),s(` ClusterRoleBinding
`),n("span",{class:"token key atrule"},"apiVersion"),n("span",{class:"token punctuation"},":"),s(` rbac.authorization.k8s.io/v1beta1
`),n("span",{class:"token key atrule"},"metadata"),n("span",{class:"token punctuation"},":"),s(`
  `),n("span",{class:"token key atrule"},"name"),n("span",{class:"token punctuation"},":"),s(" nginx"),n("span",{class:"token punctuation"},"-"),s(`ingress
`),n("span",{class:"token key atrule"},"subjects"),n("span",{class:"token punctuation"},":"),s(`
`),n("span",{class:"token punctuation"},"-"),s(),n("span",{class:"token key atrule"},"kind"),n("span",{class:"token punctuation"},":"),s(` ServiceAccount
  `),n("span",{class:"token key atrule"},"name"),n("span",{class:"token punctuation"},":"),s(" nginx"),n("span",{class:"token punctuation"},"-"),s(`ingress
  `),n("span",{class:"token key atrule"},"namespace"),n("span",{class:"token punctuation"},":"),s(" nginx"),n("span",{class:"token punctuation"},"-"),s(`ingress
`),n("span",{class:"token key atrule"},"roleRef"),n("span",{class:"token punctuation"},":"),s(`
  `),n("span",{class:"token key atrule"},"kind"),n("span",{class:"token punctuation"},":"),s(` ClusterRole
  `),n("span",{class:"token key atrule"},"name"),n("span",{class:"token punctuation"},":"),s(" nginx"),n("span",{class:"token punctuation"},"-"),s(`ingress
  `),n("span",{class:"token key atrule"},"apiGroup"),n("span",{class:"token punctuation"},":"),s(` rbac.authorization.k8s.io

`),n("span",{class:"token punctuation"},"---"),s(`
`),n("span",{class:"token key atrule"},"apiVersion"),n("span",{class:"token punctuation"},":"),s(` apps/v1
`),n("span",{class:"token key atrule"},"kind"),n("span",{class:"token punctuation"},":"),s(` DaemonSet
`),n("span",{class:"token key atrule"},"metadata"),n("span",{class:"token punctuation"},":"),s(`
  `),n("span",{class:"token key atrule"},"name"),n("span",{class:"token punctuation"},":"),s(" nginx"),n("span",{class:"token punctuation"},"-"),s(`ingress
  `),n("span",{class:"token key atrule"},"namespace"),n("span",{class:"token punctuation"},":"),s(" nginx"),n("span",{class:"token punctuation"},"-"),s(`ingress
  `),n("span",{class:"token key atrule"},"annotations"),n("span",{class:"token punctuation"},":"),s(`
    `),n("span",{class:"token key atrule"},"prometheus.io/scrape"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token string"},'"true"'),s(`
    `),n("span",{class:"token key atrule"},"prometheus.io/port"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token string"},'"9113"'),s(`
`),n("span",{class:"token key atrule"},"spec"),n("span",{class:"token punctuation"},":"),s(`
  `),n("span",{class:"token key atrule"},"selector"),n("span",{class:"token punctuation"},":"),s(`
    `),n("span",{class:"token key atrule"},"matchLabels"),n("span",{class:"token punctuation"},":"),s(`
      `),n("span",{class:"token key atrule"},"app"),n("span",{class:"token punctuation"},":"),s(" nginx"),n("span",{class:"token punctuation"},"-"),s(`ingress
  `),n("span",{class:"token key atrule"},"template"),n("span",{class:"token punctuation"},":"),s(`
    `),n("span",{class:"token key atrule"},"metadata"),n("span",{class:"token punctuation"},":"),s(`
      `),n("span",{class:"token key atrule"},"labels"),n("span",{class:"token punctuation"},":"),s(`
        `),n("span",{class:"token key atrule"},"app"),n("span",{class:"token punctuation"},":"),s(" nginx"),n("span",{class:"token punctuation"},"-"),s(`ingress
    `),n("span",{class:"token key atrule"},"spec"),n("span",{class:"token punctuation"},":"),s(`
      `),n("span",{class:"token key atrule"},"serviceAccountName"),n("span",{class:"token punctuation"},":"),s(" nginx"),n("span",{class:"token punctuation"},"-"),s(`ingress
      `),n("span",{class:"token key atrule"},"containers"),n("span",{class:"token punctuation"},":"),s(`
      `),n("span",{class:"token punctuation"},"-"),s(),n("span",{class:"token key atrule"},"image"),n("span",{class:"token punctuation"},":"),s(" nginx/nginx"),n("span",{class:"token punctuation"},"-"),s("ingress"),n("span",{class:"token punctuation"},":"),s(`1.5.5
        `),n("span",{class:"token key atrule"},"name"),n("span",{class:"token punctuation"},":"),s(" nginx"),n("span",{class:"token punctuation"},"-"),s(`ingress
        `),n("span",{class:"token key atrule"},"ports"),n("span",{class:"token punctuation"},":"),s(`
        `),n("span",{class:"token punctuation"},"-"),s(),n("span",{class:"token key atrule"},"name"),n("span",{class:"token punctuation"},":"),s(` http
          `),n("span",{class:"token key atrule"},"containerPort"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token number"},"80"),s(`
          `),n("span",{class:"token key atrule"},"hostPort"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token number"},"80"),s(`
        `),n("span",{class:"token punctuation"},"-"),s(),n("span",{class:"token key atrule"},"name"),n("span",{class:"token punctuation"},":"),s(` https
          `),n("span",{class:"token key atrule"},"containerPort"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token number"},"443"),s(`
          `),n("span",{class:"token key atrule"},"hostPort"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token number"},"443"),s(`
        `),n("span",{class:"token punctuation"},"-"),s(),n("span",{class:"token key atrule"},"name"),n("span",{class:"token punctuation"},":"),s(` prometheus
          `),n("span",{class:"token key atrule"},"containerPort"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token number"},"9113"),s(`
        `),n("span",{class:"token key atrule"},"env"),n("span",{class:"token punctuation"},":"),s(`
        `),n("span",{class:"token punctuation"},"-"),s(),n("span",{class:"token key atrule"},"name"),n("span",{class:"token punctuation"},":"),s(` POD_NAMESPACE
          `),n("span",{class:"token key atrule"},"valueFrom"),n("span",{class:"token punctuation"},":"),s(`
            `),n("span",{class:"token key atrule"},"fieldRef"),n("span",{class:"token punctuation"},":"),s(`
              `),n("span",{class:"token key atrule"},"fieldPath"),n("span",{class:"token punctuation"},":"),s(` metadata.namespace
        `),n("span",{class:"token punctuation"},"-"),s(),n("span",{class:"token key atrule"},"name"),n("span",{class:"token punctuation"},":"),s(` POD_NAME
          `),n("span",{class:"token key atrule"},"valueFrom"),n("span",{class:"token punctuation"},":"),s(`
            `),n("span",{class:"token key atrule"},"fieldRef"),n("span",{class:"token punctuation"},":"),s(`
              `),n("span",{class:"token key atrule"},"fieldPath"),n("span",{class:"token punctuation"},":"),s(` metadata.name
        `),n("span",{class:"token key atrule"},"args"),n("span",{class:"token punctuation"},":"),s(`
          `),n("span",{class:"token punctuation"},"-"),s(),n("span",{class:"token punctuation"},"-"),s("nginx"),n("span",{class:"token punctuation"},"-"),s("configmaps=$(POD_NAMESPACE)/nginx"),n("span",{class:"token punctuation"},"-"),s(`config
          `),n("span",{class:"token punctuation"},"-"),s(),n("span",{class:"token punctuation"},"-"),s("default"),n("span",{class:"token punctuation"},"-"),s("server"),n("span",{class:"token punctuation"},"-"),s("tls"),n("span",{class:"token punctuation"},"-"),s("secret=$(POD_NAMESPACE)/default"),n("span",{class:"token punctuation"},"-"),s("server"),n("span",{class:"token punctuation"},"-"),s(`secret
         `),n("span",{class:"token comment"},"#- -v=3 # Enables extensive logging. Useful for troubleshooting."),s(`
         `),n("span",{class:"token comment"},"#- -report-ingress-status"),s(`
         `),n("span",{class:"token comment"},"#- -external-service=nginx-ingress"),s(`
         `),n("span",{class:"token comment"},"#- -enable-leader-election"),s(`
          `),n("span",{class:"token punctuation"},"-"),s(),n("span",{class:"token punctuation"},"-"),s("enable"),n("span",{class:"token punctuation"},"-"),s("prometheus"),n("span",{class:"token punctuation"},"-"),s(`metrics
         `),n("span",{class:"token comment"},"#- -enable-custom-resources"),s(`

`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),bn={class:"hint-container warning"},vn=n("p",{class:"hint-container-title"},"æ³¨æ„",-1),hn={href:"https://github.com/nginxinc/kubernetes-ingress/blob/v1.5.3/docs/installation.md",target:"_blank",rel:"noopener noreferrer"},gn=o('<h3 id="åœ¨-iaas-å±‚å®Œæˆå¦‚ä¸‹é…ç½®-å…¬ç½‘load-balancer" tabindex="-1"><a class="header-anchor" href="#åœ¨-iaas-å±‚å®Œæˆå¦‚ä¸‹é…ç½®-å…¬ç½‘load-balancer" aria-hidden="true">#</a> åœ¨ IaaS å±‚å®Œæˆå¦‚ä¸‹é…ç½®ï¼ˆ<strong>å…¬ç½‘Load Balancer</strong>ï¼‰</h3><p>åˆ›å»ºè´Ÿè½½å‡è¡¡ Load Balancerï¼š</p><ul><li>ç›‘å¬å™¨ 1ï¼š80 / TCPï¼Œ SOURCE_ADDRESS ä¼šè¯ä¿æŒ</li><li>æœåŠ¡å™¨èµ„æºæ±  1ï¼š demo-worker-x-x çš„æ‰€æœ‰èŠ‚ç‚¹çš„ 80ç«¯å£</li><li>ç›‘å¬å™¨ 2ï¼š443 / TCPï¼Œ SOURCE_ADDRESS ä¼šè¯ä¿æŒ</li><li>æœåŠ¡å™¨èµ„æºæ±  2ï¼š demo-worker-x-x çš„æ‰€æœ‰èŠ‚ç‚¹çš„443ç«¯å£</li></ul><p>å‡è®¾åˆšåˆ›å»ºçš„è´Ÿè½½å‡è¡¡ Load Balancer çš„ IP åœ°å€ä¸ºï¼š z.z.z.z</p><h3 id="é…ç½®åŸŸåè§£æ" tabindex="-1"><a class="header-anchor" href="#é…ç½®åŸŸåè§£æ" aria-hidden="true">#</a> é…ç½®åŸŸåè§£æ</h3><p>å°†åŸŸå *.demo.yourdomain.com è§£æåˆ°åœ°å€è´Ÿè½½å‡è¡¡æœåŠ¡å™¨ çš„ IP åœ°å€ z.z.z.z</p><h3 id="éªŒè¯é…ç½®" tabindex="-1"><a class="header-anchor" href="#éªŒè¯é…ç½®" aria-hidden="true">#</a> éªŒè¯é…ç½®</h3>',7),fn={href:"http://a.demo.yourdomain.com",target:"_blank",rel:"noopener noreferrer"},yn=n("h2",{id:"ä¸‹ä¸€æ­¥",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#ä¸‹ä¸€æ­¥","aria-hidden":"true"},"#"),s(" ä¸‹ä¸€æ­¥")],-1),xn=n("p",null,"ğŸ‰ ğŸ‰ ğŸ‰",-1),Rn=n("p",null,"æ‚¨å·²ç»å®Œæˆäº† Kubernetes é›†ç¾¤çš„å®‰è£…ï¼Œä¸‹ä¸€æ­¥è¯·ï¼š",-1);function _n(Un,Vn){const p=d("RouterLink"),r=d("font"),u=d("Tabs"),c=d("ExternalLinkIcon");return b(),v("div",null,[g,n("div",f,[y,n("p",null,[s("æ¨èåˆå­¦è€…æŒ‰ç…§ "),e(p,{to:"/cloud/k8s/install/install-k8s.html"},{default:a(()=>[s("å®‰è£…Kubernetes å•MasterèŠ‚ç‚¹")]),_:1}),s(" æ–‡æ¡£è¿›è¡Œ Kubernetes é›†ç¾¤æ­å»º")])]),x,n("div",R,[_,n("ul",null,[n("li",null,[U,s(" å‘½ä»¤ä¸­ï¼Œå¯ä»¥çŸ¥é“æœºå™¨çš„é»˜è®¤ç½‘å¡ï¼Œé€šå¸¸æ˜¯ "),V,s("ï¼Œå¦‚ "),n("em",null,[n("strong",null,[s("default via 172.21.0.23 dev "),e(r,{color:"blue",weight:"500"},{default:a(()=>[s("eth0")]),_:1})])])]),N,E])]),T,k(` </div>

<div slot="step3"> `),S,e(u,{id:"261",data:[{title:"å¿«é€Ÿåˆå§‹åŒ–"},{title:"æ‰‹åŠ¨åˆå§‹åŒ–"}]},{tab0:a(({title:t,value:l,isActive:i})=>[F]),tab1:a(({title:t,value:l,isActive:i})=>[Z]),_:1}),w,e(u,{id:"330",data:[{title:"å’Œç¬¬ä¸€ä¸ªMasterèŠ‚ç‚¹ä¸€èµ·åˆå§‹åŒ–"},{title:"ç¬¬ä¸€ä¸ªMasterèŠ‚ç‚¹åˆå§‹åŒ–2ä¸ªå°æ—¶åå†åˆå§‹åŒ–"}],active:0},{tab0:a(({title:t,value:l,isActive:i})=>[n("p",null,[s("åˆå§‹åŒ–ç¬¬ä¸€ä¸ª master èŠ‚ç‚¹æ—¶çš„è¾“å‡ºå†…å®¹ä¸­ï¼Œç¬¬15ã€16ã€17è¡Œå°±æ˜¯ç”¨æ¥åˆå§‹åŒ–ç¬¬äºŒã€ä¸‰ä¸ª master èŠ‚ç‚¹çš„å‘½ä»¤ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š"),e(r,{color:"red"},{default:a(()=>[s("æ­¤æ—¶è¯·ä¸è¦æ‰§è¡Œè¯¥å‘½ä»¤")]),_:1})]),W]),tab1:a(({title:t,value:l,isActive:i})=>[M,z,Q,j,C,I,Y,q,B,P,A,J,n("div",G,[e(r,{color:"blue"},{default:a(()=>[s("kubeadm join apiserver.demo:6443 --token ejwx62.vqwog6il5p83uk7y \\"),D,s(" --discovery-token-ca-cert-hash sha256:6f7a8e40a810323672de5eee6f4d19aa2dbdb38411845a1bf5dd63485c43d303 ")]),_:1}),s("\\"),K,s(" --control-plane --certificate-key "),e(r,{color:"red"},{default:a(()=>[s("70eb87e62f052d2d5de759969d5b42f372d0ad798f98df38f7fe73efdf63a13c")]),_:1})])]),_:1}),O,k(` </div>

<div slot="step4"> `),L,H,e(u,{id:"404",data:[{title:"å’Œç¬¬ä¸€ä¸ªMasterèŠ‚ç‚¹ä¸€èµ·åˆå§‹åŒ–"},{title:"ç¬¬ä¸€ä¸ªMasterèŠ‚ç‚¹åˆå§‹åŒ–2ä¸ªå°æ—¶åå†åˆå§‹åŒ–"}]},{tab0:a(({title:t,value:l,isActive:i})=>[n("p",null,[s("åˆå§‹åŒ–ç¬¬ä¸€ä¸ª master èŠ‚ç‚¹æ—¶çš„è¾“å‡ºå†…å®¹ä¸­ï¼Œç¬¬25ã€26è¡Œå°±æ˜¯ç”¨æ¥åˆå§‹åŒ– worker èŠ‚ç‚¹çš„å‘½ä»¤ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š"),e(r,{color:"red"},{default:a(()=>[s("æ­¤æ—¶è¯·ä¸è¦æ‰§è¡Œè¯¥å‘½ä»¤")]),_:1})]),X]),tab1:a(({title:t,value:l,isActive:i})=>[$,nn,sn,en,an]),_:1}),tn,n("p",null,[s("kubernetesæ”¯æŒå¤šç§Ingress Controllers (traefic / Kong / Istio / Nginx ç­‰)ï¼Œæœ¬æ–‡æ¨èä½¿ç”¨ "),n("a",ln,[s("https://github.com/nginxinc/kubernetes-ingress"),e(c)])]),n("div",cn,[on,n("p",null,[n("a",rn,[s("Ingresså®˜æ–¹æ–‡æ¡£"),e(c)])]),n("p",null,[n("a",un,[s("Ingress Controllersä»‹ç»"),e(c)])]),n("p",null,[s("kubernetesæ”¯æŒå¤šç§Ingress Controllers (traefic / Kong / Istio / Nginx ç­‰)ï¼Œæœ¬æ–‡æ¨èä½¿ç”¨ "),n("a",dn,[s("https://github.com/nginxinc/kubernetes-ingress"),e(c)])])]),e(u,{id:"491",data:[{title:"å¿«é€Ÿå®‰è£…"},{title:"YAMLæ–‡ä»¶"}],active:0},{tab0:a(({title:t,value:l,isActive:i})=>[pn,kn]),tab1:a(({title:t,value:l,isActive:i})=>[mn]),_:1}),n("div",bn,[vn,n("p",null,[s("å¦‚æœæ‚¨æ‰“ç®—å°† Kubernetes ç”¨äºç”Ÿäº§ç¯å¢ƒï¼Œè¯·å‚è€ƒæ­¤æ–‡æ¡£ "),n("a",hn,[s("Installing Ingress Controller"),e(c)]),s("ï¼Œå®Œå–„ Ingress çš„é…ç½®")])]),gn,n("p",null,[s("åœ¨æµè§ˆå™¨è®¿é—® "),n("a",fn,[s("a.demo.yourdomain.com"),e(c)]),s("ï¼Œå°†å¾—åˆ° 404 NotFound é”™è¯¯é¡µé¢")]),yn,xn,Rn,n("p",null,[e(p,{to:"/learning/"},{default:a(()=>[s("è·å– Kubernetes å…è´¹æ•™ç¨‹")]),_:1})])])}const En=m(h,[["render",_n],["__file","install-kubernetes.html.vue"]]);export{En as default};
